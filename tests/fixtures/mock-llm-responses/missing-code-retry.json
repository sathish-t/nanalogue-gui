{
  "mockResponses": [
    {
      "_comment": "First: valid JSON but wrong schema - Zod validation fails, SDK sends tool-error back to the LLM",
      "choices": [
        {
          "message": {
            "role": "assistant",
            "content": null,
            "tool_calls": [
              {
                "id": "call_1",
                "type": "function",
                "function": {
                  "name": "execute_sandbox_code",
                  "arguments": "{\"python\":\"1+1\"}"
                }
              }
            ]
          },
          "finish_reason": "tool_calls"
        }
      ]
    },
    {
      "_comment": "Second: LLM receives the error and responds with valid tool call",
      "choices": [
        {
          "message": {
            "role": "assistant",
            "content": null,
            "tool_calls": [
              {
                "id": "call_2",
                "type": "function",
                "function": {
                  "name": "execute_sandbox_code",
                  "arguments": "{\"code\":\"1 + 1\"}"
                }
              }
            ]
          },
          "finish_reason": "tool_calls"
        }
      ]
    },
    null
  ],
  "expected": {
    "text": "sandbox returned: 2",
    "stepCount": 1,
    "steps": [{ "success": true, "value": 2 }],
    "minRequestCount": 2
  }
}
